{"ast":null,"code":"import _defineProperty from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState,useRef}from'react';import{useParams,useNavigate}from'react-router-dom';import{toast}from'react-toastify';import axios from'utils/axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function NewsForm(){/** form ийн утгийг хадгалах state */var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];/** update хийж байгаа хуудас байх үед newsId байна */var _useParams=useParams(),categoryId=_useParams.categoryId;/** хуудас үсрэхэд ашиглах функц */var navigate=useNavigate();/** category дэлгэрэнгүй авах нь */var getCategories=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(categoryId){var _yield$axios$get,success,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/category/\".concat(categoryId?categoryId+\"/\":\"\"));case 2:_yield$axios$get=_context.sent;success=_yield$axios$get.success;data=_yield$axios$get.data;error=_yield$axios$get.error;if(success){setFormData(data);}else{toast.error(error);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getCategories(_x){return _ref.apply(this,arguments);};}();/** анх орж ирэхэд category ыг дуудна */useEffect(function(){/** хэрвээ id байвал category дэлгэрэнгүй дуудна */if(categoryId){getCategories(categoryId);}},[]);/** өөрчлөлтийг state -д хадгалах */var handleChange=function handleChange(event,key){var value=event.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},key,value)));};/** хадгалах үед back руу хүсэлт шидэж хадгалах функц */var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var body,_yield$axios$put,_success,_data,_error,_info,_yield$axios$post,success,data,error,info;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:/** submit дарахад хуудас refresh хийж байгааг болиулсан */event.preventDefault();body=formData;/** update үе нь */if(!categoryId){_context2.next=12;break;}_context2.next=5;return axios.put(\"/api/category/\".concat(categoryId,\"/\"),body);case 5:_yield$axios$put=_context2.sent;_success=_yield$axios$put.success;_data=_yield$axios$put.data;_error=_yield$axios$put.error;_info=_yield$axios$put.info;if(_success){toast.success(_info);navigate('/admin/category/');}else{toast.error(_error);}return _context2.abrupt(\"return\");case 12:_context2.next=14;return axios.post('/api/category/',body);case 14:_yield$axios$post=_context2.sent;success=_yield$axios$post.success;data=_yield$axios$post.data;error=_yield$axios$post.error;info=_yield$axios$post.info;if(success){toast.success(info);navigate('/admin/category/');}else{toast.error(error);}case 20:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"category \\u04AF\\u04AF\\u0441\\u0433\\u044D\\u0445\"}),/*#__PURE__*/_jsx(\"div\",{className:\"page-content\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u041D\\u044D\\u0440:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:formData.name,onChange:function onChange(e){return handleChange(e,'name');}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"main\",type:\"submit\",children:\"\\u0425\\u0430\\u0434\\u0433\\u0430\\u043B\\u0430\\u0445\"})]})})]});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/pages/Admin/Pages/Category/form.js"],"names":["React","useEffect","useState","useRef","useParams","useNavigate","toast","axios","NewsForm","formData","setFormData","categoryId","navigate","getCategories","get","success","data","error","handleChange","event","key","value","target","handleSubmit","preventDefault","body","put","info","post","name","e"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport axios from 'utils/axios'\n\nexport default function NewsForm()\n{\n    /** form ийн утгийг хадгалах state */\n    const [ formData, setFormData ] = useState({})\n\n    /** update хийж байгаа хуудас байх үед newsId байна */\n    const { categoryId } = useParams()\n\n    /** хуудас үсрэхэд ашиглах функц */\n    const navigate = useNavigate()\n\n    /** category дэлгэрэнгүй авах нь */\n    const getCategories = async (categoryId) =>\n    {\n        const { success, data, error } = await axios.get(`/api/category/${categoryId ? categoryId + \"/\" : \"\"}`)\n        if (success)\n        {\n            setFormData(data)\n        }\n        else {\n            toast.error(error)\n        }\n    }\n\n    /** анх орж ирэхэд category ыг дуудна */\n    useEffect(() =>\n    {\n        /** хэрвээ id байвал category дэлгэрэнгүй дуудна */\n        if (categoryId)\n        {\n            getCategories(categoryId)\n        }\n    }, [])\n\n    /** өөрчлөлтийг state -д хадгалах */\n    const handleChange = (event, key) =>\n    {\n        const value = event.target.value\n        setFormData({ ...formData, [key]: value })\n    }\n\n    /** хадгалах үед back руу хүсэлт шидэж хадгалах функц */\n    const handleSubmit = async (event) =>\n    {\n        /** submit дарахад хуудас refresh хийж байгааг болиулсан */\n        event.preventDefault()\n\n        const body = formData\n\n        /** update үе нь */\n        if (categoryId)\n        {\n            const { success, data, error, info } = await axios.put(`/api/category/${categoryId}/`, body)\n            if (success)\n            {\n                toast.success(info)\n                navigate('/admin/category/')\n            }\n            else {\n                toast.error(error)\n            }\n            return\n        }\n        const { success, data, error, info } = await axios.post('/api/category/', body)\n        if (success)\n        {\n            toast.success(info)\n            navigate('/admin/category/')\n        }\n        else {\n            toast.error(error)\n        }\n    }\n\n    return (\n        <>\n            <h1 className={`page-title`}>category үүсгэх</h1>\n            <div className={`page-content`}>\n                <form onSubmit={handleSubmit}>\n                    <div>\n                        <label htmlFor=\"name\">Нэр:</label>\n                        <input\n                            type=\"text\"\n                            id='name'\n                            value={formData.name}\n                            onChange={(e) => handleChange(e, 'name')}\n                        />\n                    </div>\n                    <button className='main' type='submit'>\n                        Хадгалах\n                    </button>\n                </form>\n            </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}