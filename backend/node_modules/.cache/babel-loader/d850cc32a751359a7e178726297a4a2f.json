{"ast":null,"code":"import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import Button from'../../../../components/main/Button';import axios from\"utils/axios\";import{timeZoneToDateString}from'../../../../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function CategoryList(){/** category ийг хадгалах state */var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];/** back аас category жагсаалтыг авах */var getCategory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,success,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/category/');case 2:_yield$axios$get=_context.sent;success=_yield$axios$get.success;data=_yield$axios$get.data;error=_yield$axios$get.error;if(success){/** амжилттай дата авсан үед датаг state -д оноож өгөх нь */setCategories(data);}else{/** алдаа гарвал alert харуулах */toast.error(error);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getCategory(){return _ref.apply(this,arguments);};}();/** хуудас руу анх ороход category жагсаалтыг авах */useEffect(function(){getCategory();},[]);/** category устгах нь */var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _yield$axios$delete,success,data,info,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"/api/category/\".concat(id,\"/\"));case 2:_yield$axios$delete=_context2.sent;success=_yield$axios$delete.success;data=_yield$axios$delete.data;info=_yield$axios$delete.info;error=_yield$axios$delete.error;if(success){/** амжилттай устгасны дараа alert харуулах нь */toast.success(info);getCategory();}else{/** алдаа гарвал alert харуулах */toast.error(error);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-title\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/news/create/\",className:\"addBtn\",children:\"Add\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u044D\\u0440\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0431\\u04AF\\u0440\\u0442\\u0433\\u04AF\\u04AF\\u043B\\u0441\\u044D\\u043D \\u043E\\u0433\\u043D\\u043E\\u043E\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categories.map(function(category,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:category.name}),/*#__PURE__*/_jsx(\"td\",{children:timeZoneToDateString(category.createdAt)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/category/update/\".concat(category._id,\"/\"),className:\"editBtn\",children:\"\\u0417\\u0430\\u0441\\u0430\\u0445\"}),/*#__PURE__*/_jsx(Button,{className:\"deleteBtn\"/* style={{\n                                                         color: \"red\"\n                                                     }}*/,onClick:function onClick(){return handleDelete(category._id);},title:\"\\u0423\\u0441\\u0442\\u0433\\u0430\\u0445\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hr-line-dashed\"})]},idx);})})]})]})]});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/pages/Admin/Pages/Category/list.js"],"names":["React","useEffect","useState","Link","toast","Button","axios","timeZoneToDateString","CategoryList","categories","setCategories","getCategory","get","success","data","error","handleDelete","id","delete","info","map","category","idx","name","createdAt","_id"],"mappings":"oXAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,oCAAnB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAASC,oBAAT,KAAqC,mBAArC,C,6IAEA,cAAe,SAASC,CAAAA,YAAT,EAAwB,CAEnC,kCACA,cAAoCN,QAAQ,CAAC,EAAD,CAA5C,wCAAOO,UAAP,eAAmBC,aAAnB,eAEA,wCACA,GAAMC,CAAAA,WAAW,0FAAG,iMACuBL,CAAAA,KAAK,CAACM,GAAN,CAAU,gBAAV,CADvB,uCACRC,OADQ,kBACRA,OADQ,CACCC,IADD,kBACCA,IADD,CACOC,KADP,kBACOA,KADP,CAEhB,GAAIF,OAAJ,CAAa,CACT,4DACAH,aAAa,CAACI,IAAD,CAAb,CACH,CAHD,IAIK,CACD,kCACAV,KAAK,CAACW,KAAN,CAAYA,KAAZ,EACH,CATe,sDAAH,kBAAXJ,CAAAA,WAAW,0CAAjB,CAYA,qDACAV,SAAS,CAAC,UAAM,CACZU,WAAW,GACd,CAFQ,CAEN,EAFM,CAAT,CAIA,yBACA,GAAMK,CAAAA,YAAY,2FAAG,kBAAOC,EAAP,6LAC4BX,CAAAA,KAAK,CAACY,MAAN,yBAA8BD,EAA9B,MAD5B,2CACTJ,OADS,qBACTA,OADS,CACAC,IADA,qBACAA,IADA,CACMK,IADN,qBACMA,IADN,CACYJ,KADZ,qBACYA,KADZ,CAEjB,GAAIF,OAAJ,CAAa,CACT,iDACAT,KAAK,CAACS,OAAN,CAAcM,IAAd,EACAR,WAAW,GACd,CAJD,IAKK,CACD,kCACAP,KAAK,CAACW,KAAN,CAAYA,KAAZ,EACH,CAVgB,wDAAH,kBAAZC,CAAAA,YAAY,6CAAlB,CAaA,mBACI,wCACI,WAAI,SAAS,aAAb,sBADJ,cAEI,aAAK,SAAS,eAAd,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,KAAC,IAAD,EAAM,EAAE,CAAE,qBAAV,CAAiC,SAAS,CAAC,QAA3C,iBADJ,EADJ,cAII,sCACI,oCACI,mCACI,0CADJ,cAII,yHAJJ,cAOI,aAPJ,GADJ,EADJ,cAaI,uBAEQP,UAAU,CAACW,GAAX,CACI,SAACC,QAAD,CAAWC,GAAX,CAAmB,CACf,mBACI,mCACI,oBACKD,QAAQ,CAACE,IADd,EADJ,cAII,oBACKhB,oBAAoB,CAACc,QAAQ,CAACG,SAAV,CADzB,EAJJ,cAOI,mCACI,KAAC,IAAD,EAAM,EAAE,kCAA4BH,QAAQ,CAACI,GAArC,KAAR,CAAqD,SAAS,CAAC,SAA/D,4CADJ,cAEI,KAAC,MAAD,EAAQ,SAAS,CAAC,WACd;AACpD;AACA,yDAHgD,CAII,OAAO,CAAE,yBAAMT,CAAAA,YAAY,CAACK,QAAQ,CAACI,GAAV,CAAlB,EAJb,CAKI,KAAK,CAAC,sCALV,EAFJ,GAPJ,cAiBI,YAAK,SAAS,CAAC,gBAAf,EAjBJ,GAASH,GAAT,CADJ,CAqBH,CAvBL,CAFR,EAbJ,GAJJ,GAFJ,GADJ,CAqDH","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify';\n\nimport Button from '../../../../components/main/Button';\n\nimport axios from \"utils/axios\"\nimport { timeZoneToDateString } from '../../../../utils'\n\nexport default function CategoryList() {\n\n    /** category ийг хадгалах state */\n    const [categories, setCategories] = useState([])\n\n    /** back аас category жагсаалтыг авах */\n    const getCategory = async () => {\n        const { success, data, error } = await axios.get('/api/category/')\n        if (success) {\n            /** амжилттай дата авсан үед датаг state -д оноож өгөх нь */\n            setCategories(data)\n        }\n        else {\n            /** алдаа гарвал alert харуулах */\n            toast.error(error)\n        }\n    }\n\n    /** хуудас руу анх ороход category жагсаалтыг авах */\n    useEffect(() => {\n        getCategory()\n    }, [])\n\n    /** category устгах нь */\n    const handleDelete = async (id) => {\n        const { success, data, info, error } = await axios.delete(`/api/category/${id}/`)\n        if (success) {\n            /** амжилттай устгасны дараа alert харуулах нь */\n            toast.success(info)\n            getCategory()\n        }\n        else {\n            /** алдаа гарвал alert харуулах */\n            toast.error(error)\n        }\n    }\n\n    return (\n        <>\n            <h1 className={`page-title`}>Category</h1>\n            <div className={`page-content`}>\n                <div className=\"table-title\">\n                    <Link to={\"/admin/news/create/\"} className=\"addBtn\">Add</Link>\n                </div>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>\n                                Нэр\n                            </th>\n                            <th>\n                                бүртгүүлсэн огноо\n                            </th>\n                            <th>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            categories.map(\n                                (category, idx) => {\n                                    return (\n                                        <tr key={idx}>\n                                            <td>\n                                                {category.name}\n                                            </td>\n                                            <td>\n                                                {timeZoneToDateString(category.createdAt)}\n                                            </td>\n                                            <td>\n                                                <Link to={`/admin/category/update/${category._id}/`} className=\"editBtn\">Засах</Link>\n                                                <Button className=\"deleteBtn\"\n                                                    /* style={{\n                                                         color: \"red\"\n                                                     }}*/\n                                                    onClick={() => handleDelete(category._id)}\n                                                    title=\"Устгах\"\n                                                />\n                                            </td>\n                                            <div className=\"hr-line-dashed\"></div>\n                                        </tr>\n                                    )\n                                }\n                            )\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}