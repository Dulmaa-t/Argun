{"ast":null,"code":"import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import Button from'../../../../components/main/Button';import axios from\"utils/axios\";import{timeZoneToDateString}from'../../../../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function VideoList(){/** video хадгалах state */var _useState=useState([]),_useState2=_slicedToArray(_useState,2),videos=_useState2[0],setVideos=_useState2[1];/** back аас video жагсаалтыг авах */var getVideos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,success,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/video/');case 2:_yield$axios$get=_context.sent;success=_yield$axios$get.success;data=_yield$axios$get.data;error=_yield$axios$get.error;if(success){/** амжилттай дата авсан үед датаг state -д оноож өгөх нь */setVideos(data);}else{/** алдаа гарвал alert харуулах */toast.error(error);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getVideos(){return _ref.apply(this,arguments);};}();/** хуудас руу анх ороход мэдээний жагсаалтыг авах */useEffect(function(){getVideos();},[]);/** video устгах нь */var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _yield$axios$delete,success,data,info,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"/api/video/\".concat(id,\"/\"));case 2:_yield$axios$delete=_context2.sent;success=_yield$axios$delete.success;data=_yield$axios$delete.data;info=_yield$axios$delete.info;error=_yield$axios$delete.error;if(success){/** амжилттай устгасны дараа alert харуулах нь */toast.success(info);getVideos();}else{/** алдаа гарвал alert харуулах */toast.error(error);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"VIDEO\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-title\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/news/create/\",className:\"addBtn\",children:\"Add\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0413\\u0430\\u0440\\u0447\\u0438\\u0433\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u04AE\\u04AF\\u0441\\u0433\\u044D\\u0441\\u044D\\u043D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0433\\u043D\\u043E\\u043E\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:videos.map(function(video,idx){var _video$author,_video$category;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:video.title}),/*#__PURE__*/_jsx(\"td\",{children:(_video$author=video.author)===null||_video$author===void 0?void 0:_video$author.nickName}),/*#__PURE__*/_jsx(\"td\",{children:((_video$category=video.category)===null||_video$category===void 0?void 0:_video$category.name)||\"\"}),/*#__PURE__*/_jsx(\"td\",{children:timeZoneToDateString(video.createdAt)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/video/update/\".concat(video._id,\"/\"),className:\"editBtn\",children:\"\\u0417\\u0430\\u0441\\u0430\\u0445\"}),/*#__PURE__*/_jsx(Button,{className:\"deleteBtn\",onClick:function onClick(){return handleDelete(video._id);},title:\"\\u0423\\u0441\\u0442\\u0433\\u0430\\u0445\"})]})]},idx);})})]})]})]});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/pages/Admin/Pages/Video/list.js"],"names":["React","useEffect","useState","Link","toast","Button","axios","timeZoneToDateString","VideoList","videos","setVideos","getVideos","get","success","data","error","handleDelete","id","delete","info","map","video","idx","title","author","nickName","category","name","createdAt","_id"],"mappings":"oXAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,oCAAnB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAASC,oBAAT,KAAqC,mBAArC,C,6IAEA,cAAe,SAASC,CAAAA,SAAT,EAAqB,CAEhC,2BACA,cAA4BN,QAAQ,CAAC,EAAD,CAApC,wCAAOO,MAAP,eAAeC,SAAf,eAEA,qCACA,GAAMC,CAAAA,SAAS,0FAAG,iMACyBL,CAAAA,KAAK,CAACM,GAAN,CAAU,aAAV,CADzB,uCACNC,OADM,kBACNA,OADM,CACGC,IADH,kBACGA,IADH,CACSC,KADT,kBACSA,KADT,CAEd,GAAIF,OAAJ,CAAa,CACT,4DACAH,SAAS,CAACI,IAAD,CAAT,CACH,CAHD,IAIK,CACD,kCACAV,KAAK,CAACW,KAAN,CAAYA,KAAZ,EACH,CATa,sDAAH,kBAATJ,CAAAA,SAAS,0CAAf,CAYA,qDACAV,SAAS,CAAC,UAAM,CACZU,SAAS,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,sBACA,GAAMK,CAAAA,YAAY,2FAAG,kBAAOC,EAAP,6LAC4BX,CAAAA,KAAK,CAACY,MAAN,sBAA2BD,EAA3B,MAD5B,2CACTJ,OADS,qBACTA,OADS,CACAC,IADA,qBACAA,IADA,CACMK,IADN,qBACMA,IADN,CACYJ,KADZ,qBACYA,KADZ,CAEjB,GAAIF,OAAJ,CAAa,CACT,iDACAT,KAAK,CAACS,OAAN,CAAcM,IAAd,EACAR,SAAS,GACZ,CAJD,IAKK,CACD,kCACAP,KAAK,CAACW,KAAN,CAAYA,KAAZ,EACH,CAVgB,wDAAH,kBAAZC,CAAAA,YAAY,6CAAlB,CAaA,mBACI,wCACI,WAAI,SAAS,aAAb,mBADJ,cAEI,aAAK,SAAS,eAAd,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,KAAC,IAAD,EAAM,EAAE,CAAE,qBAAV,CAAiC,SAAS,CAAC,QAA3C,iBADJ,EADJ,cAII,sCACI,oCACI,mCACI,4DADJ,cAII,wEAJJ,cAOI,gCAPJ,cAUI,sDAVJ,cAaI,aAbJ,GADJ,EADJ,cAmBI,uBAEQP,MAAM,CAACW,GAAP,CACI,SAACC,KAAD,CAAQC,GAAR,CAAgB,mCACZ,mBACI,mCACI,oBACKD,KAAK,CAACE,KADX,EADJ,cAII,mCACKF,KAAK,CAACG,MADX,wCACK,cAAcC,QADnB,EAJJ,cAOI,oBACK,kBAAAJ,KAAK,CAACK,QAAN,0DAAgBC,IAAhB,GAAwB,EAD7B,EAPJ,cAUI,oBACKpB,oBAAoB,CAACc,KAAK,CAACO,SAAP,CADzB,EAVJ,cAaI,mCACI,KAAC,IAAD,EAAM,EAAE,+BAAyBP,KAAK,CAACQ,GAA/B,KAAR,CAA+C,SAAS,CAAC,SAAzD,4CADJ,cAEI,KAAC,MAAD,EAAQ,SAAS,CAAC,WAAlB,CACI,OAAO,CAAE,yBAAMb,CAAAA,YAAY,CAACK,KAAK,CAACQ,GAAP,CAAlB,EADb,CAEI,KAAK,CAAC,sCAFV,EAFJ,GAbJ,GAASP,GAAT,CADJ,CAuBH,CAzBL,CAFR,EAnBJ,GAJJ,GAFJ,GADJ,CA6DH","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify';\n\nimport Button from '../../../../components/main/Button';\n\nimport axios from \"utils/axios\"\nimport { timeZoneToDateString } from '../../../../utils'\n\nexport default function VideoList() {\n\n    /** video хадгалах state */\n    const [videos, setVideos] = useState([])\n\n    /** back аас video жагсаалтыг авах */\n    const getVideos = async () => {\n        const { success, data, error } = await axios.get('/api/video/')\n        if (success) {\n            /** амжилттай дата авсан үед датаг state -д оноож өгөх нь */\n            setVideos(data)\n        }\n        else {\n            /** алдаа гарвал alert харуулах */\n            toast.error(error)\n        }\n    }\n\n    /** хуудас руу анх ороход мэдээний жагсаалтыг авах */\n    useEffect(() => {\n        getVideos()\n    }, [])\n\n    /** video устгах нь */\n    const handleDelete = async (id) => {\n        const { success, data, info, error } = await axios.delete(`/api/video/${id}/`)\n        if (success) {\n            /** амжилттай устгасны дараа alert харуулах нь */\n            toast.success(info)\n            getVideos()\n        }\n        else {\n            /** алдаа гарвал alert харуулах */\n            toast.error(error)\n        }\n    }\n\n    return (\n        <>\n            <h1 className={`page-title`}>VIDEO</h1>\n            <div className={`page-content`}>\n                <div className=\"table-title\">\n                    <Link to={\"/admin/news/create/\"} className=\"addBtn\">Add</Link>\n                </div>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>\n                                Гарчиг\n                            </th>\n                            <th>\n                                Үүсгэсэн\n                            </th>\n                            <th>\n                                Category\n                            </th>\n                            <th>\n                                Огноо\n                            </th>\n                            <th>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            videos.map(\n                                (video, idx) => {\n                                    return (\n                                        <tr key={idx}>\n                                            <td>\n                                                {video.title}\n                                            </td>\n                                            <td>\n                                                {video.author?.nickName}\n                                            </td>\n                                            <td>\n                                                {video.category?.name || \"\"}\n                                            </td>\n                                            <td>\n                                                {timeZoneToDateString(video.createdAt)}\n                                            </td>\n                                            <td>\n                                                <Link to={`/admin/video/update/${video._id}/`} className=\"editBtn\">Засах</Link>\n                                                <Button className=\"deleteBtn\"\n                                                    onClick={() => handleDelete(video._id)}\n                                                    title=\"Устгах\"\n                                                />\n                                            </td>\n                                        </tr>\n                                    )\n                                }\n                            )\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}