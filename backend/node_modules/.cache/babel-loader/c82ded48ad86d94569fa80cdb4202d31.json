{"ast":null,"code":"import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import{useNavigate,createSearchParams,useLocation}from'react-router-dom';import Button from'../main/Button';import axios from'utils/axios';import{jsx as _jsx}from\"react/jsx-runtime\";export default function SubMenu(_ref){var handleCategory=_ref.handleCategory;/** back аас category ийн жагсаалтыг авч харуулах нв */var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),catName=_useState4[0],setCatName=_useState4[1];/** хуудас үсрэхэд хэрэг болно */var navigate=useNavigate();var location=useLocation();/** url солигдох бүрт ямар category байгаа эсэхийг шалгах */useEffect(function(){var paramCatName=new URLSearchParams(location.search).get(\"category\");setCatName(paramCatName);},[location]);/** cate ийн мэдээллийг bakc аас авах нь */var getCat=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get$catc,success,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/category/\").catch(function(err){return err;});case 2:_yield$axios$get$catc=_context.sent;success=_yield$axios$get$catc.success;data=_yield$axios$get$catc.data;error=_yield$axios$get$catc.error;if(success){setCategories(data);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getCat(){return _ref2.apply(this,arguments);};}();useEffect(function(){getCat();},[]);/** Ямар category дарагдсныг мэдэх */var handleClick=function handleClick(category){/** дарагдсан cat ийн нэр */var catName=category.name;if(handleCategory){/** categery ийн нэрийг буцаах */handleCategory(catName);}navigate({search:\"?\".concat(createSearchParams({category:catName}))});};return/*#__PURE__*/_jsx(\"div\",{className:\"sub-menu\",children:categories.map(function(category,index){return/*#__PURE__*/_jsx(\"div\",{className:\"sub-menu-nav\",children:/*#__PURE__*/_jsx(Button,{className:\"nav-btn \".concat(catName===category.name?\"active\":\"\"),title:category.name,onClick:function onClick(){return handleClick(category);}})},index);})});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/components/special/SubMenu.jsx"],"names":["React","useEffect","useState","useNavigate","createSearchParams","useLocation","Button","axios","SubMenu","handleCategory","categories","setCategories","catName","setCatName","navigate","location","paramCatName","URLSearchParams","search","get","getCat","catch","err","success","data","error","handleClick","category","name","map","index"],"mappings":"oXAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,kBAAtB,CAA0CC,WAA1C,KAA6D,kBAA7D,CAEA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,C,2CAEA,cAAe,SAASC,CAAAA,OAAT,MAAqC,IAAlBC,CAAAA,cAAkB,MAAlBA,cAAkB,CAElD,uDACA,cAAuCP,QAAQ,CAAC,EAAD,CAA/C,wCAAQQ,UAAR,eAAoBC,aAApB,eACA,eAAgCT,QAAQ,CAAC,EAAD,CAAxC,yCAAQU,OAAR,eAAiBC,UAAjB,eACA,iCACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAEA,GAAMY,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CAEA,4DACAJ,SAAS,CACP,UACA,CACE,GAAMe,CAAAA,YAAY,CAAG,GAAIC,CAAAA,eAAJ,CAAoBF,QAAQ,CAACG,MAA7B,EAAqCC,GAArC,CAAyC,UAAzC,CAArB,CACAN,UAAU,CAACG,YAAD,CAAV,CACD,CALM,CAMP,CAACD,QAAD,CANO,CAAT,CASA,2CACA,GAAMK,CAAAA,MAAM,2FAAG,sMAE4Bb,CAAAA,KAAK,CAACY,GAAN,CAAU,gBAAV,EAA4BE,KAA5B,CAAkC,SAAAC,GAAG,QAAIA,CAAAA,GAAJ,EAArC,CAF5B,4CAEHC,OAFG,uBAEHA,OAFG,CAEMC,IAFN,uBAEMA,IAFN,CAEYC,KAFZ,uBAEYA,KAFZ,CAGX,GAAIF,OAAJ,CACA,CACIZ,aAAa,CAACa,IAAD,CAAb,CACH,CANU,sDAAH,kBAANJ,CAAAA,MAAM,2CAAZ,CASAnB,SAAS,CAAC,UACV,CACEmB,MAAM,GACP,CAHQ,CAGN,EAHM,CAAT,CAKA,qCACA,GAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,QAAD,CACpB,CACE,4BACA,GAAMf,CAAAA,OAAO,CAAGe,QAAQ,CAACC,IAAzB,CACA,GAAInB,cAAJ,CACA,CACE,iCACAA,cAAc,CAACG,OAAD,CAAd,CACD,CAEDE,QAAQ,CACN,CACEI,MAAM,YAAMd,kBAAkB,CAAC,CAC7BuB,QAAQ,CAAEf,OADmB,CAAD,CAAxB,CADR,CADM,CAAR,CAOD,CAjBD,CAmBA,mBACE,YAAM,SAAS,CAAC,UAAhB,UAEIF,UAAU,CAACmB,GAAX,CAAe,SAACF,QAAD,CAAWG,KAAX,CACf,CACE,mBACE,YAAK,SAAS,CAAC,cAAf,uBACE,KAAC,MAAD,EAAQ,SAAS,mBAAalB,OAAO,GAAKe,QAAQ,CAACC,IAArB,CAA4B,QAA5B,CAAuC,EAApD,CAAjB,CAA2E,KAAK,CAAED,QAAQ,CAACC,IAA3F,CAAiG,OAAO,CAAE,yBAAMF,CAAAA,WAAW,CAACC,QAAD,CAAjB,EAA1G,EADF,EAAmCG,KAAnC,CADF,CAKD,CAPD,CAFJ,EADF,CAcD","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useNavigate, createSearchParams, useLocation } from 'react-router-dom'\n\nimport Button from '../main/Button'\n\nimport axios from 'utils/axios'\n\nexport default function SubMenu({ handleCategory }) {\n\n  /** back аас category ийн жагсаалтыг авч харуулах нв */\n  const [ categories, setCategories ] =  useState([])\n  const [ catName, setCatName ] = useState(\"\")\n  /** хуудас үсрэхэд хэрэг болно */\n  const navigate = useNavigate()\n\n  const location = useLocation()\n\n  /** url солигдох бүрт ямар category байгаа эсэхийг шалгах */\n  useEffect(\n    () =>\n    {\n      const paramCatName = new URLSearchParams(location.search).get(\"category\")\n      setCatName(paramCatName)\n    },\n    [location]\n  )\n\n  /** cate ийн мэдээллийг bakc аас авах нь */\n  const getCat = async () =>\n  {\n      const { success, data, error } = await axios.get(\"/api/category/\").catch(err => err)\n      if (success)\n      {\n          setCategories(data)\n      }\n  }\n\n  useEffect(() =>\n  {\n    getCat()\n  }, [])\n\n  /** Ямар category дарагдсныг мэдэх */\n  const handleClick = (category) =>\n  {\n    /** дарагдсан cat ийн нэр */\n    const catName = category.name\n    if (handleCategory)\n    {\n      /** categery ийн нэрийг буцаах */\n      handleCategory(catName)\n    }\n\n    navigate(\n      {\n        search: `?${createSearchParams({\n          category: catName\n        })}`\n      }\n    )\n  }\n\n  return (\n    <div  className=\"sub-menu\">\n      {\n        categories.map((category, index) =>\n        {\n          return (\n            <div className=\"sub-menu-nav\" key={index}>\n              <Button className={`nav-btn ${catName === category.name ? \"active\" : \"\"}`} title={category.name} onClick={() => handleClick(category)} />\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}