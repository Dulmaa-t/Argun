{"ast":null,"code":"var _jsxFileName = \"/Users/maidar/Desktop/projects-d/gasp/src/context/authContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport axios from 'utils/axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nconst initUserDetail = {};\nexport default function AuthContextProvider(props) {\n  _s();\n\n  /** хэрэглэгчийн мэдээлэл */\n  const [userDetail, setDetail] = useState(initUserDetail);\n  const navigate = useNavigate();\n  /** системд хэрэглэгчийн нэвтэрснээр бүртгэх */\n\n  const loggedUser = userData => {\n    //  хэрэглэгчийн мэдээллийг хадгалах нь\n    setDetail(userData);\n  };\n  /**\n   * Xэрэглэгчийн бүх мэдээллийг авах нь\n   * setDetail хийнэ\n   */\n\n\n  const getDetail = async () => {\n    const {\n      success,\n      data,\n      error\n    } = await axios.get(\"/api/author/logged/\").catch(err => err);\n\n    if (success) {\n      loggedUser(data);\n    }\n  };\n  /** Системээс гарах\n   * @param {boolean} hasToast гаргах эсэх\n  */\n\n\n  const signOut = async function () {\n    let hasToast = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    const {\n      success,\n      info,\n      error\n    } = await axios.get(\"/api/sign/out/\").catch(err => err);\n\n    if (success) {\n      /** toast гаргах эсэх */\n      if (hasToast) {\n        const text = info;\n        toast.success(text);\n      } //  хэрэглэгчийн мэдээллийг хоослох нь\n\n\n      setDetail(initUserDetail);\n      navigate(\"/admin/\");\n    } else {\n      if (hasToast) {\n        const text = error;\n        toast.error(text);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      getDetail,\n      signOut,\n      setDetail,\n      loggedUser,\n      userDetail\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthContextProvider, \"MA0qLTbJ0Y0s48EyUIYimel2Ey4=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AuthContextProvider;\nexport function useAuth() {\n  _s2();\n\n  return useContext(AuthContext);\n}\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/context/authContext.js"],"names":["React","createContext","useContext","useState","useNavigate","toast","axios","AuthContext","initUserDetail","AuthContextProvider","props","userDetail","setDetail","navigate","loggedUser","userData","getDetail","success","data","error","get","catch","err","signOut","hasToast","info","text","children","useAuth"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,QAA3C,QAA2D,OAA3D;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,OAAOC,KAAP,MAAkB,aAAlB;;AAEA,OAAO,MAAMC,WAAW,gBAAGN,aAAa,EAAjC;AAEP,MAAMO,cAAc,GAAG,EAAvB;AACA,eAAe,SAASC,mBAAT,CAA6BC,KAA7B,EACf;AAAA;;AACI;AACA,QAAM,CAAEC,UAAF,EAAcC,SAAd,IAA4BT,QAAQ,CAACK,cAAD,CAA1C;AACA,QAAMK,QAAQ,GAAGT,WAAW,EAA5B;AAEA;;AACA,QAAMU,UAAU,GAAIC,QAAD,IAAc;AAC7B;AACAH,IAAAA,SAAS,CAACG,QAAD,CAAT;AACH,GAHD;AAKA;AACJ;AACA;AACA;;;AACI,QAAMC,SAAS,GAAG,YAClB;AACI,UAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA,IAAX;AAAiBC,MAAAA;AAAjB,QAA2B,MAAMb,KAAK,CAACc,GAAN,CAAU,qBAAV,EAAiCC,KAAjC,CAAuCC,GAAG,IAAIA,GAA9C,CAAvC;;AACA,QAAIL,OAAJ,EACA;AACIH,MAAAA,UAAU,CAACI,IAAD,CAAV;AACH;AACJ,GAPD;AASA;AACJ;AACA;;;AACI,QAAMK,OAAO,GAAG,kBAChB;AAAA,QADuBC,QACvB,uEADgC,IAChC;AACI,UAAM;AAAEP,MAAAA,OAAF;AAAWQ,MAAAA,IAAX;AAAiBN,MAAAA;AAAjB,QAA2B,MAAMb,KAAK,CAACc,GAAN,CAAU,gBAAV,EAA4BC,KAA5B,CAAkCC,GAAG,IAAIA,GAAzC,CAAvC;;AACA,QAAIL,OAAJ,EACA;AACI;AACA,UAAIO,QAAJ,EACA;AACI,cAAME,IAAI,GAAGD,IAAb;AACApB,QAAAA,KAAK,CAACY,OAAN,CAAcS,IAAd;AACH,OANL,CAOI;;;AACAd,MAAAA,SAAS,CAACJ,cAAD,CAAT;AACAK,MAAAA,QAAQ,CAAC,SAAD,CAAR;AACH,KAXD,MAYK;AACD,UAAIW,QAAJ,EACA;AACI,cAAME,IAAI,GAAGP,KAAb;AACAd,QAAAA,KAAK,CAACc,KAAN,CAAYO,IAAZ;AACH;AACJ;AACJ,GAtBD;;AAwBA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AACzBV,MAAAA,SADyB;AAEzBO,MAAAA,OAFyB;AAGzBX,MAAAA,SAHyB;AAIzBE,MAAAA,UAJyB;AAKzBH,MAAAA;AALyB,KAA7B;AAAA,cAOKD,KAAK,CAACiB;AAPX;AAAA;AAAA;AAAA;AAAA,UADJ;AAWH;;GA/DuBlB,mB;UAIHL,W;;;KAJGK,mB;AAiExB,OAAO,SAASmB,OAAT,GACP;AAAA;;AACI,SAAO1B,UAAU,CAACK,WAAD,CAAjB;AACH;;IAHeqB,O","sourcesContent":["import React, { createContext, useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nimport axios from 'utils/axios'\n\nexport const AuthContext = createContext()\n\nconst initUserDetail = {}\nexport default function AuthContextProvider(props)\n{\n    /** хэрэглэгчийн мэдээлэл */\n    const [ userDetail, setDetail ] = useState(initUserDetail)\n    const navigate = useNavigate()\n\n    /** системд хэрэглэгчийн нэвтэрснээр бүртгэх */\n    const loggedUser = (userData) => {\n        //  хэрэглэгчийн мэдээллийг хадгалах нь\n        setDetail(userData)\n    }\n\n    /**\n     * Xэрэглэгчийн бүх мэдээллийг авах нь\n     * setDetail хийнэ\n     */\n    const getDetail = async () =>\n    {\n        const { success, data, error } = await axios.get(\"/api/author/logged/\").catch(err => err)\n        if (success)\n        {\n            loggedUser(data)\n        }\n    }\n\n    /** Системээс гарах\n     * @param {boolean} hasToast гаргах эсэх\n    */\n    const signOut = async (hasToast=true) =>\n    {\n        const { success, info, error } = await axios.get(\"/api/sign/out/\").catch(err => err)\n        if (success)\n        {\n            /** toast гаргах эсэх */\n            if (hasToast)\n            {\n                const text = info\n                toast.success(text)\n            }\n            //  хэрэглэгчийн мэдээллийг хоослох нь\n            setDetail(initUserDetail)\n            navigate(\"/admin/\")\n        }\n        else {\n            if (hasToast)\n            {\n                const text = error\n                toast.error(text)\n            }\n        }\n    }\n\n    return (\n        <AuthContext.Provider value={{\n            getDetail,\n            signOut,\n            setDetail,\n            loggedUser,\n            userDetail,\n        }}>\n            {props.children}\n        </AuthContext.Provider>\n    );\n}\n\nexport function useAuth()\n{\n    return useContext(AuthContext)\n}\n"]},"metadata":{},"sourceType":"module"}