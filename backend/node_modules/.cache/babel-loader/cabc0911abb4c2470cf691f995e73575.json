{"ast":null,"code":"var _jsxFileName = \"/Users/maidar/Desktop/projects-d/gasp/src/pages/Podcast/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Footer from '../Home/Footer';\nimport HeaderMenu from '../../components/special/HeaderMenu';\nimport Card from '../../components/main/podcastCard';\nimport MoreBtn from '../../components/special/MoreBtn';\nimport axios from 'utils/axios';\nimport { timeZoneToDateString, msToTime } from 'utils/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PodcastCard() {\n  _s();\n\n  /** podcast ийн мэдээллийг хадгалах state */\n  const [podcastCard, setPodcast] = useState([]);\n  const [start, setStart] = useState(0);\n  const location = useLocation();\n  /** podcast ийн мэдээллийг back аас дуудах нь */\n\n  const getData = async newStart => {\n    /** url ээс дарагдсан category байгаа эсэхийг анх орохдоо шалгах нь */\n    const paramCatName = new URLSearchParams(location.search).get(\"category\");\n    await axios.get(`/api/podcast/?${paramCatName ? `category=${paramCatName}&` : \"\"}start=${newStart}`).then(_ref => {\n      let {\n        success,\n        data,\n        error\n      } = _ref;\n\n      if (success) {\n        setPodcast([...podcastCard, ...data]);\n      }\n    }).catch(err => {});\n  };\n\n  useEffect(() => {\n    //  podcast ийн мэдээллийг back аас дуудах нь\n    getData(start);\n  }, []);\n\n  const handleMore = () => {\n    const newStart = podcastCard.length;\n    getData(newStart);\n    setStart(newStart);\n  };\n  /** Ямар category дарагдсан түүнийг авах функц */\n\n\n  const handleCategory = async catName => {\n    setStart(0);\n    const {\n      success,\n      data,\n      error\n    } = await axios.get(`/api/podcast/?category=${catName}&start=0`);\n\n    if (success) {\n      setPodcast(data);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(HeaderMenu, {\n      handleCategory: handleCategory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"dark\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container py-4\",\n        children: [podcastCard.map((element, index) => {\n          return /*#__PURE__*/_jsxDEV(Card, {\n            image: process.env.REACT_APP_SERVER_URL + element.image,\n            title: element.title,\n            dateTime: timeZoneToDateString(element.createdAt),\n            clock: msToTime(3600000),\n            text: element.text,\n            url: element.url\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 21\n          }, this);\n        }), // хэрэв podcast байхгүй бол\n        podcastCard.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"center\"\n          },\n          children: \"\\u0425\\u043E\\u043E\\u0441\\u043E\\u043D \\u0431\\u0430\\u0439\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this), // хэрэв podcast байхгүй бол\n    podcastCard.length === 0 ? /*#__PURE__*/_jsxDEV(MoreBtn, {\n      onClick: handleMore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }, this) : null, /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PodcastCard, \"+MiMeuFrz8VkkuFQmvTFGod+wTU=\", false, function () {\n  return [useLocation];\n});\n\n_c = PodcastCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"PodcastCard\");","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/pages/Podcast/index.jsx"],"names":["React","useState","useEffect","useLocation","Footer","HeaderMenu","Card","MoreBtn","axios","timeZoneToDateString","msToTime","PodcastCard","podcastCard","setPodcast","start","setStart","location","getData","newStart","paramCatName","URLSearchParams","search","get","then","success","data","error","catch","err","handleMore","length","handleCategory","catName","map","element","index","process","env","REACT_APP_SERVER_URL","image","title","createdAt","text","url","display","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\n\nimport Footer from '../Home/Footer'\nimport HeaderMenu from '../../components/special/HeaderMenu'\nimport Card from '../../components/main/podcastCard'\nimport MoreBtn from '../../components/special/MoreBtn'\n\nimport axios from 'utils/axios'\nimport { timeZoneToDateString, msToTime } from 'utils/index'\n\nexport default function PodcastCard() {\n\n  /** podcast ийн мэдээллийг хадгалах state */\n  const [ podcastCard, setPodcast ] = useState([])\n  const [ start, setStart ] = useState(0)\n  const location = useLocation()\n\n  /** podcast ийн мэдээллийг back аас дуудах нь */\n  const getData = async (newStart) =>\n  {\n    /** url ээс дарагдсан category байгаа эсэхийг анх орохдоо шалгах нь */\n    const paramCatName = new URLSearchParams(location.search).get(\"category\")\n    await axios.get(`/api/podcast/?${paramCatName ? `category=${paramCatName}&` : \"\"}start=${newStart}`)\n      .then(({ success, data, error }) =>\n        {\n          if (success)\n          {\n            setPodcast([ ...podcastCard, ...data ])\n          }\n        }\n      )\n      .catch(err =>\n        {\n\n        }\n      )\n  }\n\n  useEffect(\n    () =>\n    {\n      //  podcast ийн мэдээллийг back аас дуудах нь\n      getData(start)\n    },\n    []\n  )\n\n  const handleMore = () =>\n  {\n    const newStart = podcastCard.length\n    getData(newStart)\n    setStart(newStart)\n  }\n\n  /** Ямар category дарагдсан түүнийг авах функц */\n  const handleCategory = async (catName) =>\n  {\n    setStart(0)\n    const { success, data, error } = await axios.get(`/api/podcast/?category=${catName}&start=0`)\n    if (success)\n    {\n      setPodcast(data)\n    }\n  }\n\n  return (\n    <div>\n      <HeaderMenu handleCategory={handleCategory}/>\n        <section className=\"dark\">\n          <div className=\"container py-4\">\n            {\n              podcastCard.map(\n                (element, index) => {\n                  return (\n                    <Card\n                      key={index}\n                      image={process.env.REACT_APP_SERVER_URL + element.image}\n                      title={element.title}\n                      dateTime={timeZoneToDateString(element.createdAt)}\n                      clock={msToTime(3600000)}\n                      text={element.text}\n                      url={element.url}\n                    />\n                  )\n                }\n              )\n            }\n            {\n              // хэрэв podcast байхгүй бол\n              podcastCard.length === 0\n              ?\n                <div style={{ display: \"flex\", justifyContent: \"center\" }}>Хоосон байна</div>\n              :\n                null\n            }\n          </div>\n\n        </section>\n        {\n            // хэрэв podcast байхгүй бол\n            podcastCard.length === 0\n            ?\n              <MoreBtn onClick={handleMore}/>\n            :\n              null\n          }\n      <Footer />\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}