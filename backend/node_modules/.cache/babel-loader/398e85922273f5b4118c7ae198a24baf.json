{"ast":null,"code":"import _toConsumableArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import Footer from'../Home/Footer';import HeaderMenu from'../../components/special/HeaderMenu';import Card from'../../components/main/video';import MoreBtn from'../../components/special/MoreBtn';import axios from'utils/axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CVideo(){/** video ийн мэдээллийг хадгалах state */var _useState=useState([]),_useState2=_slicedToArray(_useState,2),videos=_useState2[0],setVideos=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),start=_useState4[0],setStart=_useState4[1];var location=useLocation();/** podcast ийн мэдээллийг back аас дуудах нь */var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(newStart){var paramCatName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/** url ээс дарагдсан category байгаа эсэхийг анх орохдоо шалгах нь */paramCatName=new URLSearchParams(location.search).get(\"category\");_context.next=3;return axios.get(\"/api/video/?\".concat(paramCatName?\"category=\".concat(paramCatName,\"&\"):\"\",\"start=\").concat(newStart)).then(function(_ref2){var success=_ref2.success,data=_ref2.data,error=_ref2.error;if(success){setVideos([].concat(_toConsumableArray(videos),_toConsumableArray(data)));}}).catch(function(err){});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getData(_x){return _ref.apply(this,arguments);};}();var handleMore=function handleMore(){var newStart=videos.length;getData(newStart);setStart(newStart);};useEffect(function(){//  video ийн мэдээллийг back аас дуудах нь\ngetData(start);},[]);/** Ямар category дарагдсан түүнийг авах функц */var handleCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(catName){var _yield$axios$get,success,data,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setStart(0);_context2.next=3;return axios.get(\"/api/video/?category=\".concat(catName,\"&start=0\"));case 3:_yield$axios$get=_context2.sent;success=_yield$axios$get.success;data=_yield$axios$get.data;error=_yield$axios$get.error;if(success){setVideos(data);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function handleCategory(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderMenu,{handleCategory:handleCategory}),/*#__PURE__*/_jsx(\"div\",{className:\"video-menu\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row nowrap\",children:[videos.map(function(element,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(Card,{image:element.image,title:element.title,text:element.text,url:element.url,createdAt:element.createdAt},index)});}),// хэрэв video байхгүй бол\nvideos.length===0?/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:\"\\u0425\\u043E\\u043E\\u0441\\u043E\\u043D \\u0431\\u0430\\u0439\\u043D\\u0430\"}):null]})})}),/*#__PURE__*/_jsx(MoreBtn,{onClick:handleMore}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/pages/Video/index.jsx"],"names":["React","useState","useEffect","useLocation","Footer","HeaderMenu","Card","MoreBtn","axios","CVideo","videos","setVideos","start","setStart","location","getData","newStart","paramCatName","URLSearchParams","search","get","then","success","data","error","catch","err","handleMore","length","handleCategory","catName","map","element","index","image","title","text","url","createdAt","display","justifyContent"],"mappings":"ufAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qCAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,6BAAjB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,C,wFAEA,cAAe,SAASC,CAAAA,MAAT,EACf,CAEE,0CACA,cAA8BR,QAAQ,CAAC,EAAD,CAAtC,wCAAQS,MAAR,eAAgBC,SAAhB,eACA,eAA4BV,QAAQ,CAAC,CAAD,CAApC,yCAAQW,KAAR,eAAeC,QAAf,eACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAEA,gDACA,GAAMY,CAAAA,OAAO,0FAAG,iBAAOC,QAAP,mIAEd,sEACMC,YAHQ,CAGO,GAAIC,CAAAA,eAAJ,CAAoBJ,QAAQ,CAACK,MAA7B,EAAqCC,GAArC,CAAyC,UAAzC,CAHP,uBAIRZ,CAAAA,KAAK,CAACY,GAAN,uBAAyBH,YAAY,oBAAeA,YAAf,MAAiC,EAAtE,kBAAiFD,QAAjF,GACHK,IADG,CACE,eACJ,IADOC,CAAAA,OACP,OADOA,OACP,CADgBC,IAChB,OADgBA,IAChB,CADsBC,KACtB,OADsBA,KACtB,CACE,GAAIF,OAAJ,CACA,CACEX,SAAS,8BAAMD,MAAN,qBAAiBa,IAAjB,GAAT,CACD,CACF,CAPC,EASHE,KATG,CASG,SAAAC,GAAG,CACR,CAEC,CAZC,CAJQ,uDAAH,kBAAPX,CAAAA,OAAO,4CAAb,CAoBA,GAAMY,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EACnB,CACE,GAAMX,CAAAA,QAAQ,CAAGN,MAAM,CAACkB,MAAxB,CACAb,OAAO,CAACC,QAAD,CAAP,CACAH,QAAQ,CAACG,QAAD,CAAR,CACD,CALD,CAOAd,SAAS,CACP,UACA,CACE;AACAa,OAAO,CAACH,KAAD,CAAP,CACD,CALM,CAMP,EANO,CAAT,CASA,iDACA,GAAMiB,CAAAA,cAAc,2FAAG,kBAAOC,OAAP,8JAErBjB,QAAQ,CAAC,CAAD,CAAR,CAFqB,uBAGkBL,CAAAA,KAAK,CAACY,GAAN,gCAAkCU,OAAlC,aAHlB,wCAGbR,OAHa,kBAGbA,OAHa,CAGJC,IAHI,kBAGJA,IAHI,CAGEC,KAHF,kBAGEA,KAHF,CAIrB,GAAIF,OAAJ,CACA,CACEX,SAAS,CAACY,IAAD,CAAT,CACD,CAPoB,wDAAH,kBAAdM,CAAAA,cAAc,8CAApB,CAUA,mBACE,oCACE,KAAC,UAAD,EAAY,cAAc,CAAEA,cAA5B,EADF,cAEE,YAAK,SAAS,CAAC,YAAf,uBACE,YAAK,SAAS,CAAC,WAAf,uBACE,aAAK,SAAS,CAAC,YAAf,WAEInB,MAAM,CAACqB,GAAP,CACE,SAACC,OAAD,CAAUC,KAAV,CAAoB,CAClB,mBACE,YAAK,SAAS,CAAC,UAAf,uBACE,KAAC,IAAD,EAEE,KAAK,CAAED,OAAO,CAACE,KAFjB,CAGE,KAAK,CAAEF,OAAO,CAACG,KAHjB,CAIE,IAAI,CAAEH,OAAO,CAACI,IAJhB,CAKE,GAAG,CAAEJ,OAAO,CAACK,GALf,CAME,SAAS,CAAEL,OAAO,CAACM,SANrB,EACOL,KADP,CADF,EADF,CAYD,CAdH,CAFJ,CAoBI;AACAvB,MAAM,CAACkB,MAAP,GAAkB,CAAlB,cAEE,YAAK,KAAK,CAAE,CAAEW,OAAO,CAAE,MAAX,CAAmBC,cAAc,CAAE,QAAnC,CAAZ,iFAFF,CAIE,IAzBN,GADF,EADF,EAFF,cAkCE,KAAC,OAAD,EAAS,OAAO,CAAEb,UAAlB,EAlCF,cAmCE,KAAC,MAAD,IAnCF,GADF,CAuCD","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\n\nimport Footer from '../Home/Footer'\nimport HeaderMenu from '../../components/special/HeaderMenu'\nimport Card from '../../components/main/video'\n\nimport MoreBtn from '../../components/special/MoreBtn'\n\nimport axios from 'utils/axios'\n\nexport default function CVideo()\n{\n\n  /** video ийн мэдээллийг хадгалах state */\n  const [ videos, setVideos ] = useState([])\n  const [ start, setStart ] = useState(0)\n  const location = useLocation()\n\n  /** podcast ийн мэдээллийг back аас дуудах нь */\n  const getData = async (newStart) =>\n  {\n    /** url ээс дарагдсан category байгаа эсэхийг анх орохдоо шалгах нь */\n    const paramCatName = new URLSearchParams(location.search).get(\"category\")\n    await axios.get(`/api/video/?${paramCatName ? `category=${paramCatName}&` : \"\"}start=${newStart}`)\n      .then(({ success, data, error }) =>\n        {\n          if (success)\n          {\n            setVideos([ ...videos, ...data ])\n          }\n        }\n      )\n      .catch(err =>\n        {\n\n        }\n      )\n  }\n\n  const handleMore = () =>\n  {\n    const newStart = videos.length\n    getData(newStart)\n    setStart(newStart)\n  }\n\n  useEffect(\n    () =>\n    {\n      //  video ийн мэдээллийг back аас дуудах нь\n      getData(start)\n    },\n    []\n  )\n\n  /** Ямар category дарагдсан түүнийг авах функц */\n  const handleCategory = async (catName) =>\n  {\n    setStart(0)\n    const { success, data, error } = await axios.get(`/api/video/?category=${catName}&start=0`)\n    if (success)\n    {\n      setVideos(data)\n    }\n  }\n\n  return (\n    <div>\n      <HeaderMenu handleCategory={handleCategory} />\n      <div className=\"video-menu\">\n        <div className=\"container\">\n          <div className=\"row nowrap\">\n            {\n              videos.map(\n                (element, index) => {\n                  return (\n                    <div className='col-md-3'>\n                      <Card\n                        key={index}\n                        image={element.image}\n                        title={element.title}\n                        text={element.text}\n                        url={element.url}\n                        createdAt={element.createdAt}\n                      />\n                    </div>\n                  )\n                }\n              )\n            }\n            {\n              // хэрэв video байхгүй бол\n              videos.length === 0\n              ?\n                <div style={{ display: \"flex\", justifyContent: \"center\" }}>Хоосон байна</div>\n              :\n                null\n            }\n          </div>\n        </div>\n      </div>\n      <MoreBtn onClick={handleMore}/>\n      <Footer />\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}