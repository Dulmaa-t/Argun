{"ast":null,"code":"import _toConsumableArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import Footer from'../Home/Footer';import HeaderMenu from'../../components/special/HeaderMenu';import Card from'../../components/main/podcastCard';import MoreBtn from'../../components/special/MoreBtn';import axios from'utils/axios';import{timeZoneToDateString,msToTime}from'utils/index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PodcastCard(){/** podcast ийн мэдээллийг хадгалах state */var _useState=useState([]),_useState2=_slicedToArray(_useState,2),podcastCard=_useState2[0],setPodcast=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),start=_useState4[0],setStart=_useState4[1];var location=useLocation();/** podcast ийн мэдээллийг back аас дуудах нь */var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(newStart){var paramCatName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/** url ээс дарагдсан category байгаа эсэхийг анх орохдоо шалгах нь */paramCatName=new URLSearchParams(location.search).get(\"category\");_context.next=3;return axios.get(\"/api/podcast/?\".concat(paramCatName?\"category=\".concat(paramCatName,\"&\"):\"\",\"start=\").concat(newStart)).then(function(_ref2){var success=_ref2.success,data=_ref2.data,error=_ref2.error;if(success){setPodcast([].concat(_toConsumableArray(podcastCard),_toConsumableArray(data)));}}).catch(function(err){});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getData(_x){return _ref.apply(this,arguments);};}();useEffect(function(){//  podcast ийн мэдээллийг back аас дуудах нь\ngetData(start);},[]);var handleMore=function handleMore(){var newStart=podcastCard.length;getData(newStart);setStart(newStart);};/** Ямар category дарагдсан түүнийг авах функц */var handleCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(catName){var _yield$axios$get,success,data,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setStart(0);_context2.next=3;return axios.get(\"/api/podcast/?category=\".concat(catName,\"&start=0\"));case 3:_yield$axios$get=_context2.sent;success=_yield$axios$get.success;data=_yield$axios$get.data;error=_yield$axios$get.error;if(success){setPodcast(data);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function handleCategory(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeaderMenu,{handleCategory:handleCategory}),/*#__PURE__*/_jsx(\"section\",{className:\"dark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[podcastCard.map(function(element,index){return/*#__PURE__*/_jsx(Card,{image:process.env.REACT_APP_SERVER_URL+element.image,title:element.title,dateTime:timeZoneToDateString(element.createdAt),clock:msToTime(3600000),text:element.text,url:element.url},index);}),// хэрэв podcast байхгүй бол\npodcastCard.length===0?/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:\"\\u0425\\u043E\\u043E\\u0441\\u043E\\u043D \\u0431\\u0430\\u0439\\u043D\\u0430\"}):null]})}),// хэрэв podcast байвал харуулна\npodcastCard.length!==0?/*#__PURE__*/_jsx(MoreBtn,{onClick:handleMore}):null,/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/pages/Podcast/index.jsx"],"names":["React","useState","useEffect","useLocation","Footer","HeaderMenu","Card","MoreBtn","axios","timeZoneToDateString","msToTime","PodcastCard","podcastCard","setPodcast","start","setStart","location","getData","newStart","paramCatName","URLSearchParams","search","get","then","success","data","error","catch","err","handleMore","length","handleCategory","catName","map","element","index","process","env","REACT_APP_SERVER_URL","image","title","createdAt","text","url","display","justifyContent"],"mappings":"ufAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,gBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qCAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mCAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAASC,oBAAT,CAA+BC,QAA/B,KAA+C,aAA/C,C,wFAEA,cAAe,SAASC,CAAAA,WAAT,EAAuB,CAEpC,4CACA,cAAoCV,QAAQ,CAAC,EAAD,CAA5C,wCAAQW,WAAR,eAAqBC,UAArB,eACA,eAA4BZ,QAAQ,CAAC,CAAD,CAApC,yCAAQa,KAAR,eAAeC,QAAf,eACA,GAAMC,CAAAA,QAAQ,CAAGb,WAAW,EAA5B,CAEA,gDACA,GAAMc,CAAAA,OAAO,0FAAG,iBAAOC,QAAP,mIAEd,sEACMC,YAHQ,CAGO,GAAIC,CAAAA,eAAJ,CAAoBJ,QAAQ,CAACK,MAA7B,EAAqCC,GAArC,CAAyC,UAAzC,CAHP,uBAIRd,CAAAA,KAAK,CAACc,GAAN,yBAA2BH,YAAY,oBAAeA,YAAf,MAAiC,EAAxE,kBAAmFD,QAAnF,GACHK,IADG,CACE,eACJ,IADOC,CAAAA,OACP,OADOA,OACP,CADgBC,IAChB,OADgBA,IAChB,CADsBC,KACtB,OADsBA,KACtB,CACE,GAAIF,OAAJ,CACA,CACEX,UAAU,8BAAMD,WAAN,qBAAsBa,IAAtB,GAAV,CACD,CACF,CAPC,EASHE,KATG,CASG,SAAAC,GAAG,CACR,CAEC,CAZC,CAJQ,uDAAH,kBAAPX,CAAAA,OAAO,4CAAb,CAoBAf,SAAS,CACP,UACA,CACE;AACAe,OAAO,CAACH,KAAD,CAAP,CACD,CALM,CAMP,EANO,CAAT,CASA,GAAMe,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EACnB,CACE,GAAMX,CAAAA,QAAQ,CAAGN,WAAW,CAACkB,MAA7B,CACAb,OAAO,CAACC,QAAD,CAAP,CACAH,QAAQ,CAACG,QAAD,CAAR,CACD,CALD,CAOA,iDACA,GAAMa,CAAAA,cAAc,2FAAG,kBAAOC,OAAP,8JAErBjB,QAAQ,CAAC,CAAD,CAAR,CAFqB,uBAGkBP,CAAAA,KAAK,CAACc,GAAN,kCAAoCU,OAApC,aAHlB,wCAGbR,OAHa,kBAGbA,OAHa,CAGJC,IAHI,kBAGJA,IAHI,CAGEC,KAHF,kBAGEA,KAHF,CAIrB,GAAIF,OAAJ,CACA,CACEX,UAAU,CAACY,IAAD,CAAV,CACD,CAPoB,wDAAH,kBAAdM,CAAAA,cAAc,8CAApB,CAUA,mBACE,oCACE,KAAC,UAAD,EAAY,cAAc,CAAEA,cAA5B,EADF,cAEI,gBAAS,SAAS,CAAC,MAAnB,uBACE,aAAK,SAAS,CAAC,gBAAf,WAEInB,WAAW,CAACqB,GAAZ,CACE,SAACC,OAAD,CAAUC,KAAV,CAAoB,CAClB,mBACE,KAAC,IAAD,EAEE,KAAK,CAAEC,OAAO,CAACC,GAAR,CAAYC,oBAAZ,CAAmCJ,OAAO,CAACK,KAFpD,CAGE,KAAK,CAAEL,OAAO,CAACM,KAHjB,CAIE,QAAQ,CAAE/B,oBAAoB,CAACyB,OAAO,CAACO,SAAT,CAJhC,CAKE,KAAK,CAAE/B,QAAQ,CAAC,OAAD,CALjB,CAME,IAAI,CAAEwB,OAAO,CAACQ,IANhB,CAOE,GAAG,CAAER,OAAO,CAACS,GAPf,EACOR,KADP,CADF,CAWD,CAbH,CAFJ,CAmBI;AACAvB,WAAW,CAACkB,MAAZ,GAAuB,CAAvB,cAEE,YAAK,KAAK,CAAE,CAAEc,OAAO,CAAE,MAAX,CAAmBC,cAAc,CAAE,QAAnC,CAAZ,iFAFF,CAIE,IAxBN,GADF,EAFJ,CAiCQ;AACAjC,WAAW,CAACkB,MAAZ,GAAuB,CAAvB,cAEE,KAAC,OAAD,EAAS,OAAO,CAAED,UAAlB,EAFF,CAIE,IAtCV,cAwCE,KAAC,MAAD,IAxCF,GADF,CA4CD","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\n\nimport Footer from '../Home/Footer'\nimport HeaderMenu from '../../components/special/HeaderMenu'\nimport Card from '../../components/main/podcastCard'\nimport MoreBtn from '../../components/special/MoreBtn'\n\nimport axios from 'utils/axios'\nimport { timeZoneToDateString, msToTime } from 'utils/index'\n\nexport default function PodcastCard() {\n\n  /** podcast ийн мэдээллийг хадгалах state */\n  const [ podcastCard, setPodcast ] = useState([])\n  const [ start, setStart ] = useState(0)\n  const location = useLocation()\n\n  /** podcast ийн мэдээллийг back аас дуудах нь */\n  const getData = async (newStart) =>\n  {\n    /** url ээс дарагдсан category байгаа эсэхийг анх орохдоо шалгах нь */\n    const paramCatName = new URLSearchParams(location.search).get(\"category\")\n    await axios.get(`/api/podcast/?${paramCatName ? `category=${paramCatName}&` : \"\"}start=${newStart}`)\n      .then(({ success, data, error }) =>\n        {\n          if (success)\n          {\n            setPodcast([ ...podcastCard, ...data ])\n          }\n        }\n      )\n      .catch(err =>\n        {\n\n        }\n      )\n  }\n\n  useEffect(\n    () =>\n    {\n      //  podcast ийн мэдээллийг back аас дуудах нь\n      getData(start)\n    },\n    []\n  )\n\n  const handleMore = () =>\n  {\n    const newStart = podcastCard.length\n    getData(newStart)\n    setStart(newStart)\n  }\n\n  /** Ямар category дарагдсан түүнийг авах функц */\n  const handleCategory = async (catName) =>\n  {\n    setStart(0)\n    const { success, data, error } = await axios.get(`/api/podcast/?category=${catName}&start=0`)\n    if (success)\n    {\n      setPodcast(data)\n    }\n  }\n\n  return (\n    <div>\n      <HeaderMenu handleCategory={handleCategory}/>\n        <section className=\"dark\">\n          <div className=\"container py-4\">\n            {\n              podcastCard.map(\n                (element, index) => {\n                  return (\n                    <Card\n                      key={index}\n                      image={process.env.REACT_APP_SERVER_URL + element.image}\n                      title={element.title}\n                      dateTime={timeZoneToDateString(element.createdAt)}\n                      clock={msToTime(3600000)}\n                      text={element.text}\n                      url={element.url}\n                    />\n                  )\n                }\n              )\n            }\n            {\n              // хэрэв podcast байхгүй бол\n              podcastCard.length === 0\n              ?\n                <div style={{ display: \"flex\", justifyContent: \"center\" }}>Хоосон байна</div>\n              :\n                null\n            }\n          </div>\n\n        </section>\n        {\n            // хэрэв podcast байвал харуулна\n            podcastCard.length !== 0\n            ?\n              <MoreBtn onClick={handleMore}/>\n            :\n              null\n          }\n      <Footer />\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}