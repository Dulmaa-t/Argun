{"ast":null,"code":"import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import{useAuth}from'context/authContext';import axios from'utils/axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginForm(props){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setDatas=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showPass=_useState4[0],setShowPass=_useState4[1];var _useAuth=useAuth(),loggedUser=_useAuth.loggedUser;var showPassword=function showPassword(){setShowPass(!showPass);};var handleChange=function handleChange(event,key){var value=event.target.value;setDatas(_objectSpread(_objectSpread({},data),{},_defineProperty({},key,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _yield$axios$post$cat,success,userData,error,info;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.next=3;return axios.post(\"/api/sign/in/\",data).catch(function(err){return err;});case 3:_yield$axios$post$cat=_context.sent;success=_yield$axios$post$cat.success;userData=_yield$axios$post$cat.data;error=_yield$axios$post$cat.error;info=_yield$axios$post$cat.info;if(success){toast.success(info);loggedUser(userData);}else{toast.error(error);}case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:\"loginForm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"square\"}),/*#__PURE__*/_jsx(\"div\",{className:\"square\"}),/*#__PURE__*/_jsx(\"div\",{className:\"square\"}),/*#__PURE__*/_jsx(\"div\",{className:\"square\"}),/*#__PURE__*/_jsx(\"div\",{className:\"square\"}),/*#__PURE__*/_jsx(\"div\",{className:\"square\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputBx\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:\"required\",onChange:function onChange(e){return handleChange(e,'email');}}),/*#__PURE__*/_jsx(\"span\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-circle\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBx password\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"password-input\",type:showPass?\"text\":\"password\",name:\"password\",required:\"required\",onChange:function onChange(e){return handleChange(e,'password');}}),/*#__PURE__*/_jsx(\"span\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"a\",{className:\"password-control\",onClick:showPassword}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-key\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"inputBx\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Log in\"})})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Forgot password? \",/*#__PURE__*/_jsx(Link,{to:\"/admin/resetpassword/\",children:\"Click Here\"})]})]})})]})});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/components/main/loginForm.jsx"],"names":["React","useState","Link","toast","useAuth","axios","LoginForm","props","email","password","data","setDatas","showPass","setShowPass","loggedUser","showPassword","handleChange","event","key","value","target","handleSubmit","preventDefault","post","catch","err","success","userData","error","info","e"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport { useAuth } from 'context/authContext'\n\nimport axios from 'utils/axios'\n\nexport default function LoginForm(props)\n{\n    const [ data, setDatas ] = useState(\n        {\n            email: \"\",\n            password: \"\",\n        }\n    )\n    const [ showPass, setShowPass ] = useState(false)\n\n    const { loggedUser } = useAuth()\n\n    const showPassword = () =>\n    {\n        setShowPass(!showPass)\n    }\n\n    const handleChange = (event, key) =>\n    {\n        const value = event.target.value\n        setDatas({ ...data, [key]: value })\n    }\n\n    const handleSubmit = async (event) =>\n    {\n        event.preventDefault()\n\n        const { success, data: userData, error, info } = await axios.post(\"/api/sign/in/\", data).catch(err => err)\n        if (success)\n        {\n            toast.success(info)\n            loggedUser(userData)\n        }\n        else {\n            toast.error(error)\n        }\n    }\n\n    return (\n        <section className='loginForm'>\n\n            <div className=\"box\">\n\n                <div className=\"square\"></div>\n                <div className=\"square\"></div>\n                <div className=\"square\"></div>\n                <div className=\"square\"></div>\n                <div className=\"square\"></div>\n                <div className=\"square\"></div>\n\n                <div className=\"container\">\n                    <div className=\"form\">\n                        <h2>LOGIN</h2>\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"inputBx\">\n                                <input type=\"text\" required=\"required\" onChange={(e) => handleChange(e, 'email')} />\n                                <span>Login</span>\n                                <i className=\"fas fa-user-circle\"></i>\n                            </div>\n                            <div className=\"inputBx password\">\n                                <input id=\"password-input\" type={showPass ? \"text\" : \"password\"} name=\"password\" required=\"required\" onChange={(e) => handleChange(e, 'password')}/>\n                                <span>Password</span>\n                                <a className=\"password-control\" onClick={showPassword}></a>\n                                <i className=\"fas fa-key\"></i>\n                            </div>\n                            <div className=\"inputBx\">\n                                <input type=\"submit\" value=\"Log in\" />\n                            </div>\n                        </form>\n                        <p>Forgot password? <Link to=\"/admin/resetpassword/\">Click Here</Link></p>\n                    </div>\n                </div>\n\n            </div>\n        </section>\n\n\n    )\n}\n"]},"metadata":{},"sourceType":"module"}