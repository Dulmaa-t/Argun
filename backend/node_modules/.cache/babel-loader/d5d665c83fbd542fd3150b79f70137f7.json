{"ast":null,"code":"import _asyncToGenerator from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/maidar/Desktop/projects-d/gasp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import Button from'../../../../components/main/Button';import axios from\"utils/axios\";import{timeZoneToDateString}from'../../../../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function NewsList(){/** author ийг хадгалах state */var _useState=useState([]),_useState2=_slicedToArray(_useState,2),authors=_useState2[0],setAuthor=_useState2[1];/** back аас author жагсаалтыг авах */var getAuthor=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,success,data,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/author/');case 2:_yield$axios$get=_context.sent;success=_yield$axios$get.success;data=_yield$axios$get.data;error=_yield$axios$get.error;if(success){/** амжилттай дата авсан үед датаг state -д оноож өгөх нь */setAuthor(data);}else{/** алдаа гарвал alert харуулах */toast.error(error);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getAuthor(){return _ref.apply(this,arguments);};}();/** хуудас руу анх ороход author жагсаалтыг авах */useEffect(function(){getAuthor();},[]);/** Author устгах нь */var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _yield$axios$delete,success,data,info,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"/api/author/\".concat(id,\"/\"));case 2:_yield$axios$delete=_context2.sent;success=_yield$axios$delete.success;data=_yield$axios$delete.data;info=_yield$axios$delete.info;error=_yield$axios$delete.error;if(success){/** амжилттай устгасны дараа alert харуулах нь */toast.success(info);getAuthor();}else{/** алдаа гарвал alert харуулах */toast.error(error);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Author\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-title\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/author/create/\",className:\"addBtn\",children:\"Add\"})}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"NickName\"}),/*#__PURE__*/_jsx(\"th\",{children:\"email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0431\\u04AF\\u0440\\u0442\\u0433\\u04AF\\u04AF\\u043B\\u0441\\u044D\\u043D \\u043E\\u0433\\u043D\\u043E\\u043E\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:authors.map(function(author,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:author.nickName}),/*#__PURE__*/_jsx(\"td\",{children:author.email}),/*#__PURE__*/_jsx(\"td\",{children:timeZoneToDateString(author.createdAt)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/author/update/\".concat(author._id,\"/\"),className:\"editBtn\",children:\"\\u0417\\u0430\\u0441\\u0430\\u0445\"}),/*#__PURE__*/_jsx(Button,{className:\"deleteBtn\"/* style={{\n                                                         color: \"red\"\n                                                     }}*/,onClick:function onClick(){return handleDelete(author._id);},title:\"\\u0423\\u0441\\u0442\\u0433\\u0430\\u0445\"})]})]},idx);})})]})]})]});}","map":{"version":3,"sources":["/Users/maidar/Desktop/projects-d/gasp/src/pages/Admin/Pages/Author/list.js"],"names":["React","useEffect","useState","Link","toast","Button","axios","timeZoneToDateString","NewsList","authors","setAuthor","getAuthor","get","success","data","error","handleDelete","id","delete","info","map","author","idx","nickName","email","createdAt","_id"],"mappings":"oXAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,oCAAnB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAASC,oBAAT,KAAqC,mBAArC,C,6IAEA,cAAe,SAASC,CAAAA,QAAT,EAAoB,CAE/B,gCACA,cAA6BN,QAAQ,CAAC,EAAD,CAArC,wCAAOO,OAAP,eAAgBC,SAAhB,eAEA,sCACA,GAAMC,CAAAA,SAAS,0FAAG,iMACyBL,CAAAA,KAAK,CAACM,GAAN,CAAU,cAAV,CADzB,uCACNC,OADM,kBACNA,OADM,CACGC,IADH,kBACGA,IADH,CACSC,KADT,kBACSA,KADT,CAEd,GAAIF,OAAJ,CAAa,CACT,4DACAH,SAAS,CAACI,IAAD,CAAT,CACH,CAHD,IAIK,CACD,kCACAV,KAAK,CAACW,KAAN,CAAYA,KAAZ,EACH,CATa,sDAAH,kBAATJ,CAAAA,SAAS,0CAAf,CAYA,mDACAV,SAAS,CAAC,UAAM,CACZU,SAAS,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,uBACA,GAAMK,CAAAA,YAAY,2FAAG,kBAAOC,EAAP,6LAC4BX,CAAAA,KAAK,CAACY,MAAN,uBAA4BD,EAA5B,MAD5B,2CACTJ,OADS,qBACTA,OADS,CACAC,IADA,qBACAA,IADA,CACMK,IADN,qBACMA,IADN,CACYJ,KADZ,qBACYA,KADZ,CAEjB,GAAIF,OAAJ,CAAa,CACT,iDACAT,KAAK,CAACS,OAAN,CAAcM,IAAd,EACAR,SAAS,GACZ,CAJD,IAKK,CACD,kCACAP,KAAK,CAACW,KAAN,CAAYA,KAAZ,EACH,CAVgB,wDAAH,kBAAZC,CAAAA,YAAY,6CAAlB,CAaA,mBACI,wCACI,WAAI,SAAS,aAAb,oBADJ,cAEI,aAAK,SAAS,eAAd,wBACI,YAAK,SAAS,CAAC,aAAf,uBACI,KAAC,IAAD,EAAM,EAAE,CAAE,uBAAV,CAAmC,SAAS,CAAC,QAA7C,iBADJ,EADJ,cAII,sCACI,oCACI,mCACI,gCADJ,cAII,6BAJJ,cAOI,yHAPJ,cAUI,aAVJ,GADJ,EADJ,cAgBI,uBAEQP,OAAO,CAACW,GAAR,CACI,SAACC,MAAD,CAASC,GAAT,CAAiB,CACb,mBACI,mCACI,oBACKD,MAAM,CAACE,QADZ,EADJ,cAII,oBACKF,MAAM,CAACG,KADZ,EAJJ,cAOI,oBACKjB,oBAAoB,CAACc,MAAM,CAACI,SAAR,CADzB,EAPJ,cAUI,mCACI,KAAC,IAAD,EAAM,EAAE,gCAA0BJ,MAAM,CAACK,GAAjC,KAAR,CAAiD,SAAS,CAAC,SAA3D,4CADJ,cAEI,KAAC,MAAD,EAAQ,SAAS,CAAC,WACd;AACpD;AACA,yDAHgD,CAII,OAAO,CAAE,yBAAMV,CAAAA,YAAY,CAACK,MAAM,CAACK,GAAR,CAAlB,EAJb,CAKI,KAAK,CAAC,sCALV,EAFJ,GAVJ,GAASJ,GAAT,CADJ,CAuBH,CAzBL,CAFR,EAhBJ,GAJJ,GAFJ,GADJ,CA0DH","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { toast } from 'react-toastify';\n\nimport Button from '../../../../components/main/Button';\n\nimport axios from \"utils/axios\"\nimport { timeZoneToDateString } from '../../../../utils'\n\nexport default function NewsList() {\n\n    /** author ийг хадгалах state */\n    const [authors, setAuthor] = useState([])\n\n    /** back аас author жагсаалтыг авах */\n    const getAuthor = async () => {\n        const { success, data, error } = await axios.get('/api/author/')\n        if (success) {\n            /** амжилттай дата авсан үед датаг state -д оноож өгөх нь */\n            setAuthor(data)\n        }\n        else {\n            /** алдаа гарвал alert харуулах */\n            toast.error(error)\n        }\n    }\n\n    /** хуудас руу анх ороход author жагсаалтыг авах */\n    useEffect(() => {\n        getAuthor()\n    }, [])\n\n    /** Author устгах нь */\n    const handleDelete = async (id) => {\n        const { success, data, info, error } = await axios.delete(`/api/author/${id}/`)\n        if (success) {\n            /** амжилттай устгасны дараа alert харуулах нь */\n            toast.success(info)\n            getAuthor()\n        }\n        else {\n            /** алдаа гарвал alert харуулах */\n            toast.error(error)\n        }\n    }\n\n    return (\n        <>\n            <h1 className={`page-title`}>Author</h1>\n            <div className={`page-content`}>\n                <div className=\"table-title\">\n                    <Link to={\"/admin/author/create/\"} className=\"addBtn\">Add</Link>\n                </div>\n                <table>\n                    <thead>\n                        <tr>\n                            <th>\n                                NickName\n                            </th>\n                            <th>\n                                email\n                            </th>\n                            <th>\n                                бүртгүүлсэн огноо\n                            </th>\n                            <th>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            authors.map(\n                                (author, idx) => {\n                                    return (\n                                        <tr key={idx}>\n                                            <td>\n                                                {author.nickName}\n                                            </td>\n                                            <td>\n                                                {author.email}\n                                            </td>\n                                            <td>\n                                                {timeZoneToDateString(author.createdAt)}\n                                            </td>\n                                            <td>\n                                                <Link to={`/admin/author/update/${author._id}/`} className=\"editBtn\">Засах</Link>\n                                                <Button className=\"deleteBtn\"\n                                                    /* style={{\n                                                         color: \"red\"\n                                                     }}*/\n                                                    onClick={() => handleDelete(author._id)}\n                                                    title=\"Устгах\"\n                                                />\n                                            </td>\n                                        </tr>\n                                    )\n                                }\n                            )\n                        }\n                    </tbody>\n                </table>\n            </div>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}